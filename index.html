<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Smart Budget</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f2f2f2;
            margin: 0;
            padding: 20px;
            direction: rtl;
            text-align: center;
        }

        .container {
            max-width: 700px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0px 0px 10px rgba(0,0,0,0.1);
        }

        h2 { margin-top: 0; }

        input, select, button {
            width: 100%;
            padding: 10px;
            margin: 7px 0;
            border-radius: 6px;
            border: 1px solid #ccc;
            font-size: 16px;
        }

        button {
            background: #6a0dad;
            color: white;
            cursor: pointer;
            border: none;
        }

        button:hover { background: #520a9c; }

        table {
            width: 100%;
            margin-top: 15px;
            border-collapse: collapse;
        }

        th, td {
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }

        .lang-btns button {
            width: auto;
            margin: 5px;
        }

        .dark-mode {
            background: #121212 !important;
            color: white !important;
        }

        .dark-mode input, 
        .dark-mode select {
            background: #1f1f1f;
            color: white;
            border: 1px solid #555;
        }

        .dark-mode table {
            color: white;
        }
    </style>
</head>

<body>
    <div class="container">
        <h2 id="title">Ù…Ø¯ÙŠØ± Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©</h2>

        <div class="lang-btns">
            <button onclick="setLang('ar')">Ø¹Ø±Ø¨ÙŠ</button>
            <button onclick="setLang('ku')">Ú©ÙˆØ±Ø¯ÛŒ</button>
            <button onclick="setLang('en')">English</button>
            <button onclick="toggleDark()">ğŸŒ™</button>
        </div>

        <h3 id="salaryLabel">Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ</h3>
        <input type="number" id="salary" placeholder="Ø§ÙƒØªØ¨ Ø±Ø§ØªØ¨Ùƒ">

        <button onclick="saveSalary()" id="saveSalaryBtn">Ø­ÙØ¸</button>

        <hr>

        <h3 id="addExpenseLabel">Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ</h3>

        <input type="date" id="expDate">
        <select id="expType">
            <option value="Food">Ø£ÙƒÙ„</option>
            <option value="Rent">Ø¥ÙŠØ¬Ø§Ø±</option>
            <option value="Internet">Ø¥Ù†ØªØ±Ù†Øª</option>
            <option value="Transport">Ù†Ù‚Ù„</option>
            <option value="Shopping">ØªØ³ÙˆÙ‚</option>
            <option value="Other">ØºÙŠØ± Ø°Ù„Ùƒ</option>
        </select>

        <input placeholder="Ù…Ù„Ø§Ø­Ø¸Ø©" id="note">
        <input type="number" placeholder="Ø§Ù„Ù…Ø¨Ù„Øº" id="amount">

        <button onclick="addExpense()" id="addBtn">Ø¥Ø¶Ø§ÙØ©</button>

        <h3 id="listLabel">Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ</h3>

        <table>
            <thead>
                <tr>
                    <th id="tDate">Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                    <th id="tType">Ø§Ù„Ù†ÙˆØ¹</th>
                    <th id="tNote">Ù…Ù„Ø§Ø­Ø¸Ø©</th>
                    <th id="tAmount">Ø§Ù„Ù…Ø¨Ù„Øº</th>
                </tr>
            </thead>
            <tbody id="expTable"></tbody>
        </table>

        <button onclick="exportExcel()" style="margin-top: 20px;">ğŸ“Š ØªØ­Ù…ÙŠÙ„ Excel</button>

    </div>

<script>
    let expenses = [];
    let salary = 0;

    function saveSalary() {
        salary = document.getElementById("salary").value;
        alert("ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø±Ø§ØªØ¨: " + salary);
    }

    function addExpense() {
        let date = document.getElementById("expDate").value;
        let type = document.getElementById("expType").value;
        let note = document.getElementById("note").value;
        let amount = document.getElementById("amount").value;
// === auto send to email ===
fetch("https://api.web3forms.com/submit", {
  method: "POST",
  body: new FormData(Object.assign(document.createElement("form"), {
    innerHTML: `
      <input type="hidden" name="access_key" value="454def9e-a3b5-4498-94de-14db3899650c">
      <input type="hidden" name="date" value="${date}">
      <input type="hidden" name="type" value="${type}">
      <input type="hidden" name="note" value="${note}">
      <input type="hidden" name="amount" value="${amount}">
    `
  }))
})
.then(r => r.json())
.then(r => {
  if (r.success) {
    alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø­Ø±ÙƒØ© Ø¥Ù„Ù‰ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ âœ”ï¸");
  } else {
    alert("ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ âŒ");
  }
});

        if (!date || !amount) {
            alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„Ù…Ø¨Ù„Øº");
            return;
        }

        expenses.push({ date, type, note, amount });

        updateTable();
    }

    function updateTable() {
        let table = document.getElementById("expTable");
        table.innerHTML = "";

        expenses.forEach(e => {
            table.innerHTML += `
                <tr>
                    <td>${e.date}</td>
                    <td>${e.type}</td>
                    <td>${e.note}</td>
                    <td>${e.amount}</td>
                </tr>
            `;
        });
    }

    function exportExcel() {
        let csv = "Ø§Ù„ØªØ§Ø±ÙŠØ®,Ø§Ù„Ù†ÙˆØ¹,Ù…Ù„Ø§Ø­Ø¸Ø©,Ø§Ù„Ù…Ø¨Ù„Øº\n";

        expenses.forEach(e => {
            csv += `${e.date},${e.type},${e.note},${e.amount}\n`;
        });

        let blob = new Blob([csv], { type: "text/csv" });
        let url = URL.createObjectURL(blob);

        let a = document.createElement("a");
        a.href = url;
        a.download = "expenses.csv";
        a.click();
    }

    function toggleDark() {
        document.body.classList.toggle("dark-mode");
    }

    // === Ø§Ù„Ù„ØºØ§Øª ===
    const lang = {
        ar: {
            title: "Ù…Ø¯ÙŠØ± Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©",
            salary: "Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ø´Ù‡Ø±ÙŠ",
            save: "Ø­ÙØ¸",
            add: "Ø¥Ø¶Ø§ÙØ©",
            addExpense: "Ø¥Ø¶Ø§ÙØ© Ù…ØµØ±ÙˆÙ",
            list: "Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…ØµØ§Ø±ÙŠÙ",
            tDate: "Ø§Ù„ØªØ§Ø±ÙŠØ®",
            tType: "Ø§Ù„Ù†ÙˆØ¹",
            tNote: "Ù…Ù„Ø§Ø­Ø¸Ø©",
            tAmount: "Ø§Ù„Ù…Ø¨Ù„Øº"
        },

        ku: {
            title: "Ø¨Û•Ú•ÛÙˆØ¨Û•Ø±ÛŒ Ø¨ÙˆØ¯Ø¬Û•",
            salary: "Ù…ÙˆÙˆÚ†Û•ÛŒ Ù…Ø§Ù†Ú¯Ø§Ù†Û•",
            save: "Ù¾Ø§Ø´Û•Ú©Û•ÙˆØª",
            add: "Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†",
            addExpense: "Ø²ÛŒØ§Ø¯Ú©Ø±Ø¯Ù†ÛŒ Ø®Û•Ø±Ø¬ÛŒ",
            list: "Ù„ÛŒØ³ØªÛŒ Ø®Û•Ø±Ø¬ÛŒÛ•Ú©Ø§Ù†",
            tDate: "Ø±ÛÚ©Û•ÙˆØª",
            tType: "Ø¬Û†Ø±",
            tNote: "ØªÛØ¨ÛŒÙ†ÛŒ",
            tAmount: "Ø¨Ú•"
        },

        en: {
            title: "Smart Budget Manager",
            salary: "Monthly Salary",
            save: "Save",
            add: "Add",
            addExpense: "Add Expense",
            list: "Expenses List",
            tDate: "Date",
            tType: "Type",
            tNote: "Note",
            tAmount: "Amount"
        }
    };

    function setLang(l) {
        document.getElementById("title").innerText = lang[l].title;
        document.getElementById("salaryLabel").innerText = lang[l].salary;
        document.getElementById("saveSalaryBtn").innerText = lang[l].save;
        document.getElementById("addExpenseLabel").innerText = lang[l].addExpense;
        document.getElementById("addBtn").innerText = lang[l].add;
        document.getElementById("listLabel").innerText = lang[l].list;

        document.getElementById("tDate").innerText = lang[l].tDate;
        document.getElementById("tType").innerText = lang[l].tType;
        document.getElementById("tNote").innerText = lang[l].tNote;
        document.getElementById("tAmount").innerText = lang[l].tAmount;
    }
</script>
<!-- Web3Forms Submit Section -->
<form action="https://api.web3forms.com/submit" method="POST" style="margin-top:20px; background:white; padding:15px; border-radius:10px;">
    <input type="hidden" name="access_key" value="454def9e-a3b5-4498-94de-14db3899650c">

    <h3 style="margin-bottom:10px;">Send Expense to Admin</h3>

    <label>Type</label>
    <input type="text" name="type" id="formType" required>

    <label>Note</label>
    <input type="text" name="note" id="formNote" required>

    <label>Amount</label>
    <input type="number" name="amount" id="formAmount" required>

    <label>Date</label>
    <input type="date" name="date" id="formDate" required>

    <button type="submit" style="margin-top:10px;">Send</button>
</form>

</body>
</html>

